![[Pasted image 20250728011930.png]]

## Препроцессор

![[Pasted image 20250728012130.png]]

Препроцессор - 1 стадия сборки программы.

Можно явно вызывать g++ -E main.cpp -o main.ii

Удаляет комментарии копипастом подставляет макросы.

![[Pasted image 20250727184551.png]]
многострочный макрос

По аккуратнее с инкрементами в макросах! может быть 2 увеличение!

## Ошибка на этапе препроцессора

```cpp
#error "unknown config например"
```

можно через флаги препроцессора определять макросы

## Как макросом из чего угодно сделать строку


```cpp
	#definge STRINGIFY(TOKEN) #TOKEN
```

## Теперь в char

```cpp
#definge STRINGIFY(TOKEN) #@TOKEN
```

## Конкатенация

```cpp
#define CONCAT(a,b) a##b
```

![[Pasted image 20250727192855.png]]


```cpp
__LINE__
// номер строчки на которой он был добавлен
__FILE__ 
// аналогично с названием файла
__DATE__
__TIME__
```


С угловыми скобками препроцессор ищет в директориях переменных окружения и системных.
С кавычками - где текущий, подкаталогах и где укажешь.

![[Pasted image 20250727195003.png]]

## Стек макросов

```cpp
#pragma warning (disable : 4507)
// выключить ворнинг
```



## Компиляция

![[Pasted image 20250728011707.png]]
![[Pasted image 20250728013313.png]]
![[Pasted image 20250728011524.png]]
![[Pasted image 20250728011828.png]]
![[Pasted image 20250728013136.png]]



![[Pasted image 20250728015812.png]]




## Оптимизация

![[Pasted image 20250728215943.png]]


на линуксе что б дебажить одновременно с++ и asm код:

```cpp
gdb -tui ./programm
```

![[Pasted image 20250728235743.png]]

выравнивание по 8 байтов